(self["webpackChunkfont_demo"]=self["webpackChunkfont_demo"]||[]).push([[523],{1318:function(t,e,a){var c=a(5656),r=a(1400),n=a(6244),o=function(t){return function(e,a,o){var s,i=c(e),u=n(i),l=r(o,u);if(t&&a!=a){while(u>l)if(s=i[l++],s!=s)return!0}else for(;u>l;l++)if((t||l in i)&&i[l]===a)return t||l||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},3658:function(t,e,a){"use strict";var c=a(9781),r=a(3157),n=TypeError,o=Object.getOwnPropertyDescriptor,s=c&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=s?function(t,e){if(r(t)&&!o(t,"length").writable)throw n("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},9920:function(t,e,a){var c=a(2597),r=a(3887),n=a(1236),o=a(3070);t.exports=function(t,e,a){for(var s=r(e),i=o.f,u=n.f,l=0;l<s.length;l++){var p=s[l];c(t,p)||a&&c(a,p)||i(t,p,u(e,p))}}},7207:function(t){var e=TypeError,a=9007199254740991;t.exports=function(t){if(t>a)throw e("Maximum allowed index exceeded");return t}},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,a){var c=a(7854),r=a(1236).f,n=a(8880),o=a(8052),s=a(3072),i=a(9920),u=a(4705);t.exports=function(t,e){var a,l,p,_,d,h,m=t.target,f=t.global,g=t.stat;if(l=f?c:g?c[m]||s(m,{}):(c[m]||{}).prototype,l)for(p in e){if(d=e[p],t.dontCallGetSet?(h=r(l,p),_=h&&h.value):_=l[p],a=u(f?p:m+(g?".":"#")+p,t.forced),!a&&void 0!==_){if(typeof d==typeof _)continue;i(d,_)}(t.sham||_&&_.sham)&&n(d,"sham",!0),o(l,p,d,t)}}},8361:function(t,e,a){var c=a(1702),r=a(7293),n=a(4326),o=Object,s=c("".split);t.exports=r((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"==n(t)?s(t,""):o(t)}:o},3157:function(t,e,a){var c=a(4326);t.exports=Array.isArray||function(t){return"Array"==c(t)}},4705:function(t,e,a){var c=a(7293),r=a(614),n=/#|\.prototype\./,o=function(t,e){var a=i[s(t)];return a==l||a!=u&&(r(e)?c(e):!!e)},s=o.normalize=function(t){return String(t).replace(n,".").toLowerCase()},i=o.data={},u=o.NATIVE="N",l=o.POLYFILL="P";t.exports=o},6244:function(t,e,a){var c=a(7466);t.exports=function(t){return c(t.length)}},4758:function(t){var e=Math.ceil,a=Math.floor;t.exports=Math.trunc||function(t){var c=+t;return(c>0?a:e)(c)}},1236:function(t,e,a){var c=a(9781),r=a(6916),n=a(5296),o=a(9114),s=a(5656),i=a(4948),u=a(2597),l=a(4664),p=Object.getOwnPropertyDescriptor;e.f=c?p:function(t,e){if(t=s(t),e=i(e),l)try{return p(t,e)}catch(a){}if(u(t,e))return o(!r(n.f,t,e),t[e])}},8006:function(t,e,a){var c=a(6324),r=a(748),n=r.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return c(t,n)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},6324:function(t,e,a){var c=a(1702),r=a(2597),n=a(5656),o=a(1318).indexOf,s=a(3501),i=c([].push);t.exports=function(t,e){var a,c=n(t),u=0,l=[];for(a in c)!r(s,a)&&r(c,a)&&i(l,a);while(e.length>u)r(c,a=e[u++])&&(~o(l,a)||i(l,a));return l}},5296:function(t,e){"use strict";var a={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,r=c&&!a.call({1:2},1);e.f=r?function(t){var e=c(this,t);return!!e&&e.enumerable}:a},3887:function(t,e,a){var c=a(5005),r=a(1702),n=a(8006),o=a(5181),s=a(9670),i=r([].concat);t.exports=c("Reflect","ownKeys")||function(t){var e=n.f(s(t)),a=o.f;return a?i(e,a(t)):e}},1400:function(t,e,a){var c=a(9303),r=Math.max,n=Math.min;t.exports=function(t,e){var a=c(t);return a<0?r(a+e,0):n(a,e)}},5656:function(t,e,a){var c=a(8361),r=a(4488);t.exports=function(t){return c(r(t))}},9303:function(t,e,a){var c=a(4758);t.exports=function(t){var e=+t;return e!==e||0===e?0:c(e)}},7466:function(t,e,a){var c=a(9303),r=Math.min;t.exports=function(t){return t>0?r(c(t),9007199254740991):0}},7658:function(t,e,a){"use strict";var c=a(2109),r=a(7908),n=a(6244),o=a(3658),s=a(7207),i=a(7293),u=i((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},p=u||!l();c({target:"Array",proto:!0,arity:1,forced:p},{push:function(t){var e=r(this),a=n(e),c=arguments.length;s(a+c);for(var i=0;i<c;i++)e[a]=arguments[i],a++;return o(e,a),a}})},3229:function(t,e,a){"use strict";a.d(e,{r:function(){return n}});var c=a(3907),r=a(6252);const n=t=>{const e=(0,c.oR)(),a=e.state.cartList,n=(t,a,c,r)=>{e.commit("changeCartItemInfo",{shopId:t,productId:a,productInfo:c,num:r})},o=(0,r.Fl)((()=>{const e=a[t]?.productList||{},c={};for(const t in e){const a=e[t];a.count>0&&(c[t]=a)}return c})),s=(0,r.Fl)((()=>{const e=a[t]?.shopName||"";return e})),i=(0,r.Fl)((()=>{const e=a[t]?.productList||[],c={total:0,price:0,totalcheck:!0};if(e)for(const t in e){const a=e[t];c.total+=a.count,!0===a.check&&(c.price+=a.count*a.price),e[t].count>0&&!1===e[t].check&&(c.totalcheck=!1)}return c.price=c.price.toFixed(2),c}));return{cartList:a,productList:o,changeCartItemInfo:n,shopName:s,calculate:i}}},2316:function(t,e,a){"use strict";a.d(e,{Z:function(){return w}});var c=a(6252),r=a(3577);const n=["src"],o={class:"shop__content"},s={class:"shop__content__title"},i={class:"shop__content__tags"},u={class:"shop__content__tag"},l={key:0,class:"productList"},p={key:0,class:"product"},_=["src"],d={class:"product__detail"},h={class:"product__name"},m={class:"product__price"},f={class:"product__saleprice"};function g(t,e,a,g,C,v){return a.item?((0,c.wg)(),(0,c.iD)("div",{key:0,class:"shop",onClick:e[0]||(e[0]=t=>g.toRestuarantClick(a.item.id))},[(0,c._)("img",{src:a.item.image,alt:"",class:"shop__img"},null,8,n),(0,c._)("div",o,[(0,c._)("div",s,(0,r.zw)(a.item.name),1),(0,c._)("div",i,[(0,c._)("span",u,(0,r.zw)(a.item.Category.name),1)]),a.item.Products?((0,c.wg)(),(0,c.iD)("div",l,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(a.item.Products,(t=>((0,c.wg)(),(0,c.iD)(c.HY,{key:t.id},[t.isShowProduct&&t.id?((0,c.wg)(),(0,c.iD)("div",p,[(0,c._)("img",{class:"product__img",src:t.image},null,8,_),(0,c._)("div",d,[(0,c._)("div",h,(0,r.zw)(t.name),1),(0,c._)("div",m,[(0,c._)("span",f,"$"+(0,r.zw)(t.price),1)])])])):(0,c.kq)("",!0)],64)))),128))])):(0,c.kq)("",!0)])])):(0,c.kq)("",!0)}a(7658);var C=a(1120),v={name:"shopInfo",props:{item:{}},setup(){const t=t=>{C.Z.push(`/shop/${t}`)};return{toRestuarantClick:t}}},k=a(3744);const I=(0,k.Z)(v,[["render",g],["__scopeId","data-v-cc7c631a"]]);var w=I},9061:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return lt}});var c=a(6252),r=a(9963);const n={class:"wrapper"},o={class:"search"},s={class:"search__content"},i={class:"search__content__icon"};function u(t,e,a,u,l,p){const _=(0,c.up)("font-awesome-icon"),d=(0,c.up)("ShopInfo"),h=(0,c.up)("ContentPage"),m=(0,c.up)("CartPage");return(0,c.wg)(),(0,c.iD)("div",n,[(0,c._)("div",o,[(0,c._)("div",{class:"search__back",onClick:e[0]||(e[0]=(...t)=>u.handleBackClick&&u.handleBackClick(...t))},[(0,c.Wm)(_,{icon:["fas","chevron-left"],class:"awesomeicon"})]),(0,c._)("div",s,[(0,c._)("span",i,[(0,c.Wm)(_,{icon:["fas","magnifying-glass"],class:"awesomeicon"})]),(0,c.wy)((0,c._)("input",{class:"search__content__input",placeholder:"請輸入產品名稱搜尋","onUpdate:modelValue":e[1]||(e[1]=t=>u.inputValue=t)},null,512),[[r.nr,u.inputValue]])])]),(0,c.Wm)(d,{item:u.restaurantData,hideBorder:!0},null,8,["item"]),(0,c.Wm)(h,{restaurantData:u.restaurantData,productcategoriesData:u.productcategoriesData,inputValue:u.inputValue},null,8,["restaurantData","productcategoriesData","inputValue"]),(0,c.Wm)(m)])}var l=a(2262),p=a(2316),_=a(3577);const d={class:"content"},h={class:"category"},m=["onClick"],f={key:0,class:"product"},g=["src"],C={class:"product__item__detail"},v={class:"product__item__title"},k={class:"product__item__desc"},I={class:"product__item__price"},w={class:"product__item__twd"},y={class:"product__number"},D=["onClick"],b=["onClick"];function P(t,e,a,r,n,o){return(0,c.wg)(),(0,c.iD)("div",d,[(0,c._)("ul",h,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.categories,(t=>((0,c.wg)(),(0,c.iD)("li",{class:(0,_.C_)({category__item:!0,"category__item--active":r.currentTab===t.id}),key:t.name,onClick:()=>r.handleTabClick(t.id)},(0,_.zw)(t.name),11,m)))),128))]),a.restaurantData?((0,c.wg)(),(0,c.iD)("div",f,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredProducts,(t=>((0,c.wg)(),(0,c.iD)("div",{class:"product__item",key:t.id},[(0,c._)("img",{class:"product__item__img",src:t.image,alt:""},null,8,g),(0,c._)("div",C,[(0,c._)("h4",v,(0,_.zw)(t.name),1),(0,c._)("p",k,(0,_.zw)(t.description),1),(0,c._)("div",I,[(0,c._)("span",w,"$"+(0,_.zw)(t.price),1)])]),(0,c._)("div",y,[(0,c._)("span",{class:"product__number__minus",onClick:()=>{r.changeCartItem(a.restaurantData.id,t.id,t,-1,a.restaurantData.name)}},"-",8,D),(0,c.Uk)(" "+(0,_.zw)(r.cartList?.[a.restaurantData.id]?.productList?.[t.id]?.count||0)+" ",1),(0,c._)("span",{class:"product__number__plus",onClick:()=>{r.changeCartItem(a.restaurantData.id,t.id,t,1,a.restaurantData.name)}},"+",8,b)])])))),128))])):(0,c.kq)("",!0)])}var L=a(3907),x=a(2201),O=a(3229);const A=()=>{const t=(0,L.oR)(),{changeCartItemInfo:e,cartList:a}=(0,O.r)(),c=(e,a)=>{t.commit("changeShopName",{shopId:e,shopName:a})},r=(t,a,r,n,o)=>{e(t,a,r,n),c(t,o)};return{cartList:a,changeCartItem:r}};var j={name:"ContentPart",props:["shopName","restaurantData","productcategoriesData","inputValue"],setup(t){const e=(0,x.yj)(),a=e.params.id,r=(0,l.iH)([]),n=(0,l.iH)(0),{restaurantData:o}=(0,l.BK)(t),s=t=>{n.value=t},i=(0,c.Fl)((()=>{if(!o.value||!o.value.Products)return[];const e=0===n.value?o.value.Products:o.value.Products.filter((t=>t.productcategoryId===n.value));if(!t.inputValue)return e;const a=new RegExp(`${t.inputValue}`,"i");return e.filter((t=>a.test(t.name)||a.test(t.description)))})),{cartList:u,changeCartItem:p}=A();return(0,c.YP)((()=>t.productcategoriesData),(t=>{if(t){const e=Object.values(t).map((t=>({id:t.id,name:t.name})));e.unshift({id:0,name:"全部"}),r.value=e,n.value=e[0]?.id}})),{categories:r,shopId:a,cartList:u,changeCartItem:p,currentTab:n,handleTabClick:s,filteredProducts:i}}},z=a(3744);const H=(0,z.Z)(j,[["render",P],["__scopeId","data-v-515b3422"]]);var S=H;const V=t=>((0,c.dD)("data-v-7986fb54"),t=t(),(0,c.Cn)(),t),E={class:"cart"},T={key:0,class:"product"},N={class:"product__top"},R=["onClick"],Y=["src"],Z={class:"product__item__detail"},B={class:"product__item__title"},F={class:"product__item__price"},M=V((()=>(0,c._)("span",{class:"product__item__yen"},"$",-1))),W={class:"product__number"},$=["onClick"],q=["onClick"],K={class:"check"},U={class:"check__img__tag"},G={class:"check__total"},J=V((()=>(0,c._)("span",{class:"check__total__chinese"},"總計:",-1))),Q={class:"check__total__number"},X={class:"check__button"};function tt(t,e,a,n,o,s){const i=(0,c.up)("font-awesome-icon"),u=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[n.showCart&&n.calculate.total>0?((0,c.wg)(),(0,c.iD)("div",{key:0,class:"mask",onClick:e[0]||(e[0]=(...t)=>n.changeCartAppear&&n.changeCartAppear(...t))})):(0,c.kq)("",!0),(0,c._)("div",E,[n.showCart&&n.calculate.total>0?((0,c.wg)(),(0,c.iD)("div",T,[(0,c._)("div",N,[(0,c._)("div",{class:"product__top__icon",onClick:e[1]||(e[1]=t=>n.changeAllCartItemCheck(n.calculate.totalcheck))},[n.calculate.totalcheck?((0,c.wg)(),(0,c.j4)(i,{key:0,icon:["fa","circle-check"],class:"faCheckIcon"})):((0,c.wg)(),(0,c.j4)(i,{key:1,icon:["far","circle-check"],class:"farCheckIcon"}))]),(0,c._)("span",{class:"product__top__selectall",onClick:e[2]||(e[2]=t=>n.changeAllCartItemCheck(n.calculate.totalcheck))},"全選"),(0,c._)("span",{class:"product__top__clear",onClick:e[3]||(e[3]=(...t)=>n.CartItemClear&&n.CartItemClear(...t))},"清空購物車")]),((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.productList,(t=>((0,c.wg)(),(0,c.iD)("div",{key:t._id,class:"product__item"},[(0,c._)("div",{class:"product__item__icon",onClick:()=>n.changeCartItemCheck(t.id)},[!0===t.check?((0,c.wg)(),(0,c.j4)(i,{key:0,icon:["fa","circle-check"],class:"faCheckIcon"})):((0,c.wg)(),(0,c.j4)(i,{key:1,icon:["far","circle-check"],class:"farCheckIcon"}))],8,R),(0,c._)("img",{class:"product__item__img",src:t.image},null,8,Y),(0,c._)("div",Z,[(0,c._)("h4",B,(0,_.zw)(t.name),1),(0,c._)("p",F,[M,(0,c.Uk)((0,_.zw)(t.price),1)])]),(0,c._)("div",W,[(0,c._)("span",{class:"product__number__minus",onClick:()=>{n.changeCartItemInfo(n.shopId,t.id,t,-1)}},"-",8,$),(0,c.Uk)(" "+(0,_.zw)(n.getProductCartCount(n.shopId,t.id))+" ",1),(0,c._)("span",{class:"product__number__plus",onClick:()=>{n.changeCartItemInfo(n.shopId,t.id,t,1)}},"+",8,q)])])))),128))])):(0,c.kq)("",!0),(0,c._)("div",K,[(0,c._)("div",{class:"check__img",onClick:e[4]||(e[4]=(...t)=>n.changeCartAppear&&n.changeCartAppear(...t))},[(0,c.Wm)(i,{icon:["fas","cart-shopping"]}),(0,c._)("div",U,(0,_.zw)(n.calculate.total),1)]),(0,c._)("div",G,[J,(0,c._)("span",Q,"$"+(0,_.zw)(n.calculate.price),1)]),(0,c.wy)((0,c._)("button",X,[(0,c.Wm)(u,{to:{path:`/orderConfirmation/${n.shopId}`}},{default:(0,c.w5)((()=>[(0,c.Uk)(" 去結算 ")])),_:1},8,["to"])],512),[[r.F8,n.calculate.price>0]])])])],64)}const et=t=>{const{cartList:e,productList:a,changeCartItemInfo:c,calculate:r}=(0,O.r)(t),n=(0,L.oR)(),o=(0,l.iH)(!1),s=(t,a)=>e?.[t]?.productList?.[a]?.count||0,i=e=>{n.commit("changeCartItemCheck",{shopId:t,productId:e})},u=()=>{o.value=!1,n.commit("CartItemClear",{shopId:t})},p=e=>{n.commit("changeAllCartItemCheck",{shopId:t,isProductListCheckAll:e})},_=()=>{o.value=!o.value};return{calculate:r,productList:a,getProductCartCount:s,changeCartItemInfo:c,changeCartItemCheck:i,CartItemClear:u,changeAllCartItemCheck:p,cartList:e,changeCartAppear:_,showCart:o}};var at={name:"CartPage",setup(){const t=(0,x.yj)(),e=t.params.id,{calculate:a,productList:c,getProductCartCount:r,changeCartItemInfo:n,changeCartItemCheck:o,CartItemClear:s,changeAllCartItemCheck:i,cartList:u,changeCartAppear:l,showCart:p}=et(e);return{calculate:a,productList:c,getProductCartCount:r,shopId:e,changeCartItemInfo:n,changeCartItemCheck:o,CartItemClear:s,changeAllCartItemCheck:i,cartList:u,changeCartAppear:l,showCart:p}}};const ct=(0,z.Z)(at,[["render",tt],["__scopeId","data-v-7986fb54"]]);var rt=ct,nt=a(4818);const ot=()=>{const t=(0,x.yj)(),e=(0,l.iH)(),a=(0,l.iH)(),c=async()=>{try{const c=t.params.id,r=await nt.Z.getRestaurant({id:c});if(200===r?.status){const t=r.data.data;e.value=t.restaurant,a.value=t.productcategories}}catch(c){console.error("錯誤",c)}};return{getItemData:c,restaurantData:e,productcategoriesData:a}},st=()=>{const t=(0,x.tv)(),e=()=>{t.back()};return{handleBackClick:e}};var it={name:"ShopPage",components:{ShopInfo:p.Z,CartPage:rt,ContentPage:S},setup(){const t=(0,l.iH)(""),{restaurantData:e,getItemData:a,productcategoriesData:c}=ot(),{handleBackClick:r}=st();return a(),{handleBackClick:r,restaurantData:e,productcategoriesData:c,inputValue:t}}};const ut=(0,z.Z)(it,[["render",u],["__scopeId","data-v-372ce8aa"]]);var lt=ut}}]);
//# sourceMappingURL=shop.1410b944.js.map